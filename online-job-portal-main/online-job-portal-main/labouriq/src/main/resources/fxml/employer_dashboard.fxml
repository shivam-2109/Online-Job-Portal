<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.Button?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.control.Separator?>
<?import javafx.scene.control.TableColumn?>
<?import javafx.scene.control.TableView?>
<?import javafx.scene.control.TextField?>
<?import javafx.scene.effect.DropShadow?>
<?import javafx.scene.layout.BorderPane?>
<?import javafx.scene.layout.HBox?>
<?import javafx.scene.layout.Region?>
<?import javafx.scene.layout.StackPane?>
<?import javafx.scene.layout.VBox?>
<?import javafx.scene.shape.SVGPath?>

<BorderPane xmlns:fx="http://javafx.com/fxml"
            fx:controller="com.labouriq.controllers.EmployerController"
            prefWidth="1200" prefHeight="800"
            styleClass="root-bg"
            stylesheets="@/css/styles.css">

    <left>
        <VBox prefWidth="260" spacing="0" styleClass="sidebar-panel">

            <VBox alignment="CENTER_LEFT" spacing="10" style="-fx-padding: 30 20 40 25;">
                <HBox alignment="CENTER_LEFT" spacing="12">
                    <StackPane styleClass="logo-icon-bg">
                        <SVGPath content="M12 2L2 7l10 5 10-5-10-5zm0 9l2.5-1.25L12 8.5l-2.5 1.25L12 11zm0 2.5l-5-2.5-5 2.5L12 22l10-8.5-5-2.5-5 2.5z"
                                 fill="WHITE" scaleX="1.2" scaleY="1.2"/>
                    </StackPane>
                    <Label text="LabourIQ" styleClass="brand-text" style="-fx-font-size: 22px;"/>
                </HBox>
                <Label text="EMPLOYER PORTAL" textFill="#bcaaa4" style="-fx-font-size: 10px; -fx-padding: 5 0 0 5; -fx-font-weight:bold;"/>
            </VBox>

            <VBox spacing="8" VBox.vgrow="ALWAYS" style="-fx-padding: 0 15 0 15;">

                <Button text="My Jobs" onAction="#showJobs" maxWidth="Infinity" styleClass="nav-btn-active">
                    <graphic><SVGPath content="M20 6h-4V4c0-1.11-.89-2-2-2h-4c-1.11 0-2 .89-2 2v2H4c-1.11 0-1.99.89-1.99 2L2 19c0 1.11.89 2 2 2h16c1.11 0 2-.89 2-2V8c0-1.11-.89-2-2-2zm-6 0h-4V4h4v2z" fill="WHITE" scaleX="0.9" scaleY="0.9"/></graphic>
                </Button>

                <Button text="Post New Job" onAction="#showPostJob" maxWidth="Infinity" styleClass="nav-btn">
                    <graphic><SVGPath content="M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z" fill="#D1C4E9" scaleX="0.9" scaleY="0.9"/></graphic>
                </Button>

                <Button text="Applications" onAction="#showApplications" maxWidth="Infinity" styleClass="nav-btn">
                    <graphic><SVGPath content="M16 11c1.66 0 2.99-1.34 2.99-3S17.66 5 16 5c-1.66 0-3 1.34-3 3s1.34 3 3 3zm-8 0c1.66 0 2.99-1.34 2.99-3S9.66 5 8 5C6.34 5 5 6.34 5 8s1.34 3 3 3zm0 2c-2.33 0-7 1.17-7 3.5V19h14v-2.5c0-2.33-4.67-3.5-7-3.5zm8 0c-.29 0-.62.02-.97.05 1.16.84 1.97 1.97 1.97 3.45V19h6v-2.5c0-2.33-4.67-3.5-7-3.5z" fill="#D1C4E9" scaleX="0.9" scaleY="0.9"/></graphic>
                </Button>

                <Button text="Messages" onAction="#showMessages" maxWidth="Infinity" styleClass="nav-btn">
                    <graphic><SVGPath content="M20 2H4c-1.1 0-1.99.9-1.99 2L2 22l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm-2 12H6v-2h12v2zm0-3H6V9h12v2zm0-3H6V6h12v2z" fill="#D1C4E9" scaleX="0.9" scaleY="0.9"/></graphic>
                </Button>

                <Region VBox.vgrow="ALWAYS"/>

                <Button text="Logout" onAction="#onLogout" maxWidth="Infinity" styleClass="nav-btn-logout"/>
            </VBox>
        </VBox>
    </left>

    <center>
        <VBox spacing="25" style="-fx-background-color: #F4F6F9; -fx-padding: 30;">

            <HBox alignment="CENTER_LEFT" spacing="20">
                <VBox>
                    <Label text="Overview" styleClass="page-title"/>
                    <Label text="Here is what's happening with your jobs today." styleClass="subtitle-text"/>
                </VBox>
                <Region HBox.hgrow="ALWAYS"/>

                <HBox alignment="CENTER" spacing="10">
                    <StackPane style="-fx-background-color: #E8EAF6; -fx-background-radius: 50; -fx-pref-width: 40; -fx-pref-height: 40;">
                        <Label text="HR" textFill="#3F51B5" style="-fx-font-weight:bold;"/>
                    </StackPane>
                </HBox>
            </HBox>

            <StackPane fx:id="contentPane" VBox.vgrow="ALWAYS">
                <VBox spacing="25">

                    <HBox spacing="20">
                        <VBox styleClass="kpi-card" HBox.hgrow="ALWAYS">
                            <Label text="Active Listings" styleClass="kpi-label"/>
                            <Label fx:id="activeJobsLabel" text="3" styleClass="kpi-value"/>
                        </VBox>

                        <VBox styleClass="kpi-card" HBox.hgrow="ALWAYS">
                            <Label text="Total Applicants" styleClass="kpi-label"/>
                            <Label fx:id="totalApplicantsLabel" text="128" styleClass="kpi-value"/>
                            <Label text="+12 today" styleClass="kpi-subtext" textFill="#2ecc71"/>
                        </VBox>

                        <VBox styleClass="kpi-card" HBox.hgrow="ALWAYS">
                            <Label text="Interviews" styleClass="kpi-label"/>
                            <Label text="5" styleClass="kpi-value"/>
                            <Label text="Scheduled this week" styleClass="kpi-subtext"/>
                        </VBox>

                        <VBox styleClass="kpi-card" style="-fx-background-color: #4A00E0;" HBox.hgrow="ALWAYS" alignment="CENTER_LEFT">
                            <Label text="Need more talent?" textFill="WHITE" style="-fx-font-weight:bold; -fx-font-size:14px;"/>
                            <Button text="+ Post a Job" onAction="#showPostJob" styleClass="secondary-btn" style="-fx-text-fill: #4A00E0; -fx-font-weight:bold; -fx-background-color: white;"/>
                        </VBox>
                    </HBox>

                    <VBox styleClass="table-container" VBox.vgrow="ALWAYS">
                        <HBox alignment="CENTER_LEFT" spacing="10" style="-fx-padding: 0 0 15 0;">
                            <Label text="Your Recent Job Postings" styleClass="section-header"/>
                            <Region HBox.hgrow="ALWAYS"/>
                            <TextField promptText="Search jobs..." styleClass="modern-input" style="-fx-padding: 8; -fx-font-size: 12px;"/>
                        </HBox>

                        <TableView fx:id="jobsTable" VBox.vgrow="ALWAYS" styleClass="modern-table">
                            <columns>
                                <TableColumn text="Job Title" prefWidth="250"/>
                                <TableColumn text="Posted Date" prefWidth="120"/>
                                <TableColumn text="Applicants" prefWidth="100"/>
                                <TableColumn text="Status" prefWidth="100"/>
                                <TableColumn text="Actions" prefWidth="180"/>
                            </columns>
                            <columnResizePolicy>
                                <TableView fx:constant="CONSTRAINED_RESIZE_POLICY"/>
                            </columnResizePolicy>
                        </TableView>

                        <HBox alignment="CENTER_RIGHT" style="-fx-padding: 10 0 0 0;">
                            <Label fx:id="jobCountLabel" text="Showing 3 active jobs" styleClass="muted-text"/>
                        </HBox>
                    </VBox>
                </VBox>
            </StackPane>
        </VBox>
    </center>
</BorderPane>