<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.Button?>
<?import javafx.scene.control.ComboBox?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.control.Separator?>
<?import javafx.scene.control.TableColumn?>
<?import javafx.scene.control.TableView?>
<?import javafx.scene.control.TextField?>
<?import javafx.scene.layout.HBox?>
<?import javafx.scene.layout.Region?>
<?import javafx.scene.layout.VBox?>
<?import javafx.scene.shape.SVGPath?>

<VBox xmlns:fx="http://javafx.com/fxml"
      fx:controller="com.labouriq.controllers.ApplicationsController"
      spacing="20"
      style="-fx-background-color: #F4F6F9; -fx-padding: 30;"
      prefHeight="600" prefWidth="900"
      stylesheets="@/css/styles.css">

    <HBox alignment="CENTER_LEFT" spacing="15">
        <VBox>
            <Label text="Candidate Applications" styleClass="page-title"/>
            <Label fx:id="jobTitleLabel" text="For: Senior Java Developer (Job ID: #4092)" styleClass="subtitle-text"/>
        </VBox>

        <Region HBox.hgrow="ALWAYS"/>

        <HBox alignment="CENTER" spacing="10" styleClass="search-box">
            <SVGPath content="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"
                     fill="#95a5a6" scaleX="0.8" scaleY="0.8"/>
            <TextField fx:id="searchField" promptText="Search applicants..." styleClass="transparent-field"/>
        </HBox>
    </HBox>

    <VBox styleClass="table-card" VBox.vgrow="ALWAYS">

        <HBox alignment="CENTER_LEFT" spacing="15" style="-fx-padding: 0 0 15 0;">

            <ComboBox fx:id="statusFilter" promptText="Filter by Status" styleClass="combo-filter" prefWidth="150"/>

            <Separator orientation="VERTICAL"/>

            <Button text="Download Resumes" styleClass="action-btn-outlined">
                <graphic><SVGPath content="M19 9h-4V3H9v6H5l7 7 7-7zM5 18v2h14v-2H5z" fill="#555" scaleX="0.8" scaleY="0.8"/></graphic>
            </Button>

            <Region HBox.hgrow="ALWAYS"/>

            <Button text="Reject" onAction="#onReject" styleClass="action-btn-danger">
                <graphic><SVGPath content="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z" fill="#e74c3c" scaleX="0.8" scaleY="0.8"/></graphic>
            </Button>

            <Button text="Schedule Interview" onAction="#onAccept" styleClass="primary-btn" style="-fx-background-color: #2ecc71;">
                <graphic><SVGPath content="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z" fill="WHITE" scaleX="0.8" scaleY="0.8"/></graphic>
            </Button>
        </HBox>

        <TableView fx:id="appsTable" VBox.vgrow="ALWAYS" styleClass="modern-table">
            <columns>
                <TableColumn fx:id="colName" text="Applicant Name" prefWidth="180"/>
                <TableColumn fx:id="colDate" text="Applied Date" prefWidth="120"/>
                <TableColumn fx:id="colResume" text="Resume Link" prefWidth="150"/>
                <TableColumn fx:id="colCover" text="Cover Letter Snippet" prefWidth="250"/>
                <TableColumn fx:id="colStatus" text="Status" prefWidth="120"/>
            </columns>
            <columnResizePolicy>
                <TableView fx:constant="CONSTRAINED_RESIZE_POLICY"/>
            </columnResizePolicy>
            <placeholder>
                <Label text="No applications found for this job yet."/>
            </placeholder>
        </TableView>

        <HBox alignment="CENTER_RIGHT" style="-fx-padding: 10 0 0 0;">
            <Label fx:id="countLabel" text="Showing 0 applicants" styleClass="small-text"/>
        </HBox>
    </VBox>
</VBox>