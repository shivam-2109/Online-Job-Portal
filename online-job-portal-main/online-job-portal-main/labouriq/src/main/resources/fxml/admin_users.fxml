<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.Button?>
<?import javafx.scene.control.ComboBox?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.control.TableColumn?>
<?import javafx.scene.control.TableView?>
<?import javafx.scene.control.TextField?>
<?import javafx.scene.layout.HBox?>
<?import javafx.scene.layout.Region?>
<?import javafx.scene.layout.VBox?>
<?import javafx.scene.shape.SVGPath?>
<?import java.lang.String?>

<VBox xmlns:fx="http://javafx.com/fxml"
      fx:controller="com.labouriq.controllers.AdminUsersController"
      spacing="20"
      style="-fx-background-color: #F4F6F9; -fx-padding: 30;"
      prefHeight="600" prefWidth="900"
      stylesheets="@/css/styles.css">

    <HBox alignment="CENTER_LEFT" spacing="15">
        <VBox>
            <Label text="User Management" styleClass="page-title"/>
            <Label text="Manage user access and roles" styleClass="subtitle-text"/>
        </VBox>

        <Region HBox.hgrow="ALWAYS"/>

        <HBox alignment="CENTER" spacing="10" styleClass="search-box">
            <SVGPath content="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"
                     fill="#95a5a6" scaleX="0.8" scaleY="0.8"/>
            <TextField fx:id="searchField" promptText="Search users..." styleClass="transparent-field"/>
        </HBox>

        <ComboBox fx:id="roleFilter" promptText="All Roles" styleClass="combo-filter"/>

        <Button text="+ Add New" onAction="#onAddUser" styleClass="primary-btn"/>
    </HBox>

    <VBox styleClass="table-card" VBox.vgrow="ALWAYS">

        <HBox alignment="CENTER_LEFT" spacing="10" style="-fx-padding: 0 0 10 0;">
            <Label fx:id="totalCountLabel" text="Total: 0 users" styleClass="muted-text"/>
            <Region HBox.hgrow="ALWAYS"/>

            <Button text="Edit" onAction="#onEdit" styleClass="action-btn-outlined">
                <graphic><SVGPath content="M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.39-.39-1.02-.39-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z" fill="#555" scaleX="0.8" scaleY="0.8"/></graphic>
            </Button>

            <Button text="Ban / Delete" onAction="#onDelete" styleClass="action-btn-danger">
                <graphic><SVGPath content="M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z" fill="#e74c3c" scaleX="0.8" scaleY="0.8"/></graphic>
            </Button>

            <Button onAction="#onRefresh" styleClass="icon-only-btn">
                <graphic><SVGPath content="M17.65 6.35C16.2 4.9 14.21 4 12 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08c-.82 2.33-3.04 4-5.65 4-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4l-2.35 2.35z" fill="#555"/></graphic>
            </Button>
        </HBox>

        <TableView fx:id="usersTable" VBox.vgrow="ALWAYS" styleClass="modern-table">
            <columns>
                <TableColumn fx:id="colId" text="ID" prefWidth="60"/>
                <TableColumn fx:id="colName" text="Full Name" prefWidth="180"/>
                <TableColumn fx:id="colEmail" text="Email Address" prefWidth="220"/>
                <TableColumn fx:id="colRole" text="Role" prefWidth="120"/>
                <TableColumn fx:id="colStatus" text="Status" prefWidth="100"/>
                <TableColumn fx:id="colJoined" text="Date Joined" prefWidth="120"/>
            </columns>
            <columnResizePolicy>
                <TableView fx:constant="CONSTRAINED_RESIZE_POLICY"/>
            </columnResizePolicy>
        </TableView>

        <HBox alignment="CENTER_RIGHT" style="-fx-padding: 10 0 0 0;">
            <Label text="Showing 1-10 of 50" styleClass="small-text"/>
        </HBox>
    </VBox>
</VBox>

