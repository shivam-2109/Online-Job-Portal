<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.Button?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.control.ListView?>
<?import javafx.scene.control.ScrollPane?>
<?import javafx.scene.control.Separator?>
<?import javafx.scene.control.TextField?>
<?import javafx.scene.effect.DropShadow?>
<?import javafx.scene.layout.BorderPane?>
<?import javafx.scene.layout.HBox?>
<?import javafx.scene.layout.Region?>
<?import javafx.scene.layout.StackPane?>
<?import javafx.scene.layout.VBox?>
<?import javafx.scene.shape.SVGPath?>
<?import javafx.scene.text.Font?>

<BorderPane xmlns:fx="http://javafx.com/fxml"
            fx:controller="com.labouriq.controllers.JobSeekerController"
            prefWidth="1200" prefHeight="800"
            styleClass="root-bg"
            stylesheets="@/css/styles.css">

    <left>
        <VBox prefWidth="260" spacing="0" styleClass="sidebar-panel">

            <VBox alignment="CENTER_LEFT" spacing="10" style="-fx-padding: 30 20 40 25;">
                <HBox alignment="CENTER_LEFT" spacing="12">
                    <StackPane styleClass="logo-icon-bg">
                        <SVGPath content="M12 2L2 7l10 5 10-5-10-5zm0 9l2.5-1.25L12 8.5l-2.5 1.25L12 11zm0 2.5l-5-2.5-5 2.5L12 22l10-8.5-5-2.5-5 2.5z"
                                 fill="WHITE" scaleX="1.2" scaleY="1.2"/>
                    </StackPane>
                    <Label text="LabourIQ" styleClass="brand-text" style="-fx-font-size: 22px;"/>
                </HBox>
                <Label text="JOB SEEKER PORTAL" textFill="#bcaaa4" style="-fx-font-size: 10px; -fx-padding: 5 0 0 5; -fx-font-weight:bold;"/>
            </VBox>

            <VBox spacing="8" VBox.vgrow="ALWAYS" style="-fx-padding: 0 15 0 15;">

                <Button text="Find Jobs" onAction="#showSearch" maxWidth="Infinity" styleClass="nav-btn-active">
                    <graphic><SVGPath content="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z" fill="WHITE" scaleX="0.9" scaleY="0.9"/></graphic>
                </Button>

                <Button text="My Applications" onAction="#showApplications" maxWidth="Infinity" styleClass="nav-btn">
                    <graphic><SVGPath content="M14 2H6c-1.1 0-1.99.9-1.99 2L4 20c0 1.1.89 2 1.99 2H18c1.1 0 2-.9 2-2V8l-6-6zm2 16H8v-2h8v2zm0-4H8v-2h8v2zm-3-5V3.5L18.5 9H13z" fill="#D1C4E9" scaleX="0.9" scaleY="0.9"/></graphic>
                </Button>

                <Button text="Saved Jobs" onAction="#showSaved" maxWidth="Infinity" styleClass="nav-btn">
                    <graphic><SVGPath content="M17 3H7c-1.1 0-1.99.9-1.99 2L5 21l7-3 7 3V5c0-1.1-.9-2-2-2z" fill="#D1C4E9" scaleX="0.9" scaleY="0.9"/></graphic>
                </Button>

                <Button text="My Profile" onAction="#showProfile" maxWidth="Infinity" styleClass="nav-btn">
                    <graphic><SVGPath content="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z" fill="#D1C4E9" scaleX="0.9" scaleY="0.9"/></graphic>
                </Button>

                <Region VBox.vgrow="ALWAYS"/>

                <Button text="Logout" onAction="#onLogout" maxWidth="Infinity" styleClass="nav-btn-logout"/>
            </VBox>
        </VBox>
    </left>

    <center>
        <VBox spacing="25" style="-fx-background-color: #F4F6F9; -fx-padding: 30;">

            <HBox alignment="CENTER_LEFT" spacing="20">
                <VBox>
                    <Label text="Welcome back, Sufiyan!" styleClass="page-title"/>
                    <Label text="We found 12 new jobs matching your profile." styleClass="subtitle-text"/>
                </VBox>
                <Region HBox.hgrow="ALWAYS"/>

                <HBox alignment="CENTER" spacing="10">
                    <StackPane style="-fx-background-color: #E8EAF6; -fx-background-radius: 50; -fx-pref-width: 40; -fx-pref-height: 40;">
                        <Label text="SK" textFill="#3F51B5" style="-fx-font-weight:bold;"/>
                    </StackPane>
                </HBox>
            </HBox>

            <HBox spacing="10" style="-fx-background-color: white; -fx-background-radius: 10; -fx-padding: 10; -fx-effect: dropshadow(three-pass-box, rgba(0,0,0,0.05), 10, 0, 0, 5);">
                <TextField promptText="What job are you looking for?" styleClass="transparent-field" HBox.hgrow="ALWAYS" style="-fx-font-size: 14px;"/>
                <Separator orientation="VERTICAL"/>
                <TextField promptText="Location (e.g. Mumbai)" styleClass="transparent-field" prefWidth="200"/>
                <Button text="Search" styleClass="primary-btn"/>
            </HBox>

            <StackPane fx:id="contentPane" VBox.vgrow="ALWAYS">
                <VBox spacing="25">

                    <HBox spacing="20">
                        <VBox styleClass="kpi-card" HBox.hgrow="ALWAYS">
                            <Label text="Applications Sent" styleClass="kpi-label"/>
                            <Label text="14" styleClass="kpi-value"/>
                            <Label text="2 viewed by employer" styleClass="kpi-subtext" textFill="#2ecc71"/>
                        </VBox>

                        <VBox styleClass="kpi-card" HBox.hgrow="ALWAYS">
                            <Label text="Saved Jobs" styleClass="kpi-label"/>
                            <Label text="8" styleClass="kpi-value"/>
                        </VBox>

                        <VBox styleClass="kpi-card" HBox.hgrow="ALWAYS">
                            <Label text="Interviews" styleClass="kpi-label"/>
                            <Label text="1" styleClass="kpi-value"/>
                            <Label text="Tomorrow at 10:00 AM" styleClass="kpi-subtext" textFill="#e67e22"/>
                        </VBox>
                    </HBox>

                    <VBox styleClass="table-container" VBox.vgrow="ALWAYS">
                        <HBox alignment="CENTER_LEFT" spacing="10" style="-fx-padding: 0 0 15 0;">
                            <Label text="Recommended for you" styleClass="section-header"/>
                            <Region HBox.hgrow="ALWAYS"/>
                            <Button text="Refresh Feed" onAction="#onRefresh" styleClass="icon-only-btn">
                                <graphic><SVGPath content="M17.65 6.35C16.2 4.9 14.21 4 12 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08c-.82 2.33-3.04 4-5.65 4-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4l-2.35 2.35z" fill="#555"/></graphic>
                            </Button>
                        </HBox>

                        <ListView fx:id="recommendationList" styleClass="modern-listview" VBox.vgrow="ALWAYS"/>

                        <Label fx:id="recCount" text="Showing 5 recommendations" styleClass="muted-text" style="-fx-padding: 10 0 0 0;"/>
                    </VBox>
                </VBox>
            </StackPane>
        </VBox>
    </center>
</BorderPane>