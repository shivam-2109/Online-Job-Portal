<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.Button?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.control.Separator?>
<?import javafx.scene.control.TableColumn?>
<?import javafx.scene.control.TableView?>
<?import javafx.scene.control.TextField?>
<?import javafx.scene.effect.DropShadow?>
<?import javafx.scene.image.ImageView?>
<?import javafx.scene.layout.AnchorPane?>
<?import javafx.scene.layout.BorderPane?>
<?import javafx.scene.layout.HBox?>
<?import javafx.scene.layout.Region?>
<?import javafx.scene.layout.StackPane?>
<?import javafx.scene.layout.VBox?>
<?import javafx.scene.shape.SVGPath?>
<?import javafx.scene.text.Font?>

<BorderPane xmlns:fx="http://javafx.com/fxml"
            fx:controller="com.labouriq.controllers.AdminController"
            prefWidth="1200" prefHeight="800"
            styleClass="root-bg"
            stylesheets="@/css/styles.css">

    <left>
        <VBox prefWidth="260" spacing="0" styleClass="sidebar-panel">

            <VBox alignment="CENTER_LEFT" spacing="10" style="-fx-padding: 30 20 40 25;">
                <HBox alignment="CENTER_LEFT" spacing="12">
                    <StackPane styleClass="logo-icon-bg">
                        <SVGPath content="M12 2L2 7l10 5 10-5-10-5zm0 9l2.5-1.25L12 8.5l-2.5 1.25L12 11zm0 2.5l-5-2.5-5 2.5L12 22l10-8.5-5-2.5-5 2.5z"
                                 fill="WHITE" scaleX="1.2" scaleY="1.2"/>
                    </StackPane>
                    <Label text="LabourIQ" styleClass="brand-text" style="-fx-font-size: 22px;"/>
                </HBox>
                <Label text="ADMIN CONSOLE" textFill="#bcaaa4" style="-fx-font-size: 10px; -fx-padding: 5 0 0 5; -fx-font-weight:bold;"/>
            </VBox>

            <VBox spacing="8" VBox.vgrow="ALWAYS" style="-fx-padding: 0 15 0 15;">

                <Button text="Dashboard" onAction="#showDashboard" maxWidth="Infinity" styleClass="nav-btn-active">
                    <graphic>
                        <SVGPath content="M3 13h8V3H3v10zm0 8h8v-6H3v6zm10 0h8V11h-8v10zm0-18v6h8V3h-8z" fill="WHITE" scaleX="0.8" scaleY="0.8"/>
                    </graphic>
                </Button>

                <Button text="User Management" onAction="#showUsers" maxWidth="Infinity" styleClass="nav-btn">
                    <graphic>
                        <SVGPath content="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z" fill="#D1C4E9" scaleX="0.9" scaleY="0.9"/>
                    </graphic>
                </Button>

                <Button text="Job Approvals" onAction="#showPendingJobs" maxWidth="Infinity" styleClass="nav-btn">
                    <graphic>
                        <SVGPath content="M14 6V4h-4v2h4zM4 8v11h16V8H4zm16-2c1.11 0 2 .89 2 2v11c0 1.11-.89 2-2 2H4c-1.11 0-2-.89-2-2l.01-11c0-1.11.89-2 2-2h3.18C7.6 2.16 8.7 1 10 1h4c1.3 0 2.4 1.16 2.82 3H20z" fill="#D1C4E9" scaleX="0.8" scaleY="0.8"/>
                    </graphic>
                </Button>

                <Button text="Reports &amp; Analytics" onAction="#showReports" maxWidth="Infinity" styleClass="nav-btn">
                    <graphic>
                        <SVGPath content="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zM9 17H7v-7h2v7zm4 0h-2V7h2v10zm4 0h-2v-4h2v4z" fill="#D1C4E9" scaleX="0.9" scaleY="0.9"/>
                    </graphic>
                </Button>

                <Region VBox.vgrow="ALWAYS"/>

                <Button text="Settings" onAction="#showSettings" maxWidth="Infinity" styleClass="nav-btn"/>
                <Button text="Logout" onAction="#onLogout" maxWidth="Infinity" styleClass="nav-btn-logout"/>
                <Label text="v1.0.2 Stable" textFill="#ffffff50" style="-fx-padding: 10 0 20 10; -fx-font-size:10px;"/>
            </VBox>
        </VBox>
    </left>

    <center>
        <VBox spacing="25" style="-fx-background-color: #F4F6F9; -fx-padding: 30;">

            <HBox alignment="CENTER_LEFT" spacing="20">
                <Label text="Overview" styleClass="page-title"/>
                <Region HBox.hgrow="ALWAYS"/>

                <HBox alignment="CENTER" spacing="10" style="-fx-background-color:white; -fx-background-radius:20; -fx-padding: 5 15;">
                    <SVGPath content="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z" fill="#95a5a6" scaleX="0.8" scaleY="0.8"/>
                    <TextField promptText="Search data..." style="-fx-background-color:transparent; -fx-pref-width: 200;"/>
                </HBox>

                <HBox alignment="CENTER" spacing="10">
                    <StackPane style="-fx-background-color: #E8EAF6; -fx-background-radius: 50; -fx-pref-width: 40; -fx-pref-height: 40;">
                        <Label text="AD" textFill="#3F51B5" style="-fx-font-weight:bold;"/>
                    </StackPane>
                </HBox>
            </HBox>

            <StackPane fx:id="contentPane" VBox.vgrow="ALWAYS">
                <VBox spacing="25">

                    <HBox spacing="20">
                        <VBox styleClass="kpi-card" HBox.hgrow="ALWAYS">
                            <Label text="Total Users" styleClass="kpi-label"/>
                            <Label fx:id="totalUsersLabel" text="8,420" styleClass="kpi-value"/>
                            <Label text="+12% from last week" styleClass="kpi-subtext" textFill="#2ecc71"/>
                        </VBox>

                        <VBox styleClass="kpi-card" HBox.hgrow="ALWAYS">
                            <Label text="Active Jobs" styleClass="kpi-label"/>
                            <Label fx:id="totalJobsLabel" text="1,205" styleClass="kpi-value"/>
                            <Label text="+5% new postings" styleClass="kpi-subtext" textFill="#3498db"/>
                        </VBox>

                        <VBox styleClass="kpi-card" HBox.hgrow="ALWAYS">
                            <Label text="Pending Approvals" styleClass="kpi-label"/>
                            <Label text="45" styleClass="kpi-value" textFill="#e67e22"/> <Label text="Requires action" styleClass="kpi-subtext"/>
                        </VBox>

                        <VBox styleClass="kpi-card" HBox.hgrow="ALWAYS">
                            <Label text="Revenue" styleClass="kpi-label"/>
                            <Label text="$ " styleClass="kpi-value"/>
                        </VBox>
                    </HBox>

                    <VBox styleClass="table-container" VBox.vgrow="ALWAYS">
                        <HBox alignment="CENTER_LEFT" spacing="10" style="-fx-padding: 0 0 15 0;">
                            <Label text="Recent System Activity" styleClass="section-header"/>
                            <Region HBox.hgrow="ALWAYS"/>
                            <Button text="Export Report" styleClass="secondary-btn"/>
                        </HBox>

                        <TableView fx:id="activityTable" VBox.vgrow="ALWAYS" styleClass="modern-table">
                            <columns>
                                <TableColumn text="Timestamp" prefWidth="180"/>
                                <TableColumn text="User" prefWidth="220"/>
                                <TableColumn text="Role" prefWidth="120"/>
                                <TableColumn text="Action Description" prefWidth="450"/>
                            </columns>
                            <columnResizePolicy>
                                <TableView fx:constant="CONSTRAINED_RESIZE_POLICY"/>
                            </columnResizePolicy>
                        </TableView>
                    </VBox>
                </VBox>
            </StackPane>
        </VBox>
    </center>
</BorderPane>